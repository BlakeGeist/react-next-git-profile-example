{"ast":null,"code":"var __jsx = React.createElement;\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport ProfilesSearch from './ProfilesSearch';\nimport ProfileSort from './ProfileSort';\n\nconst ProfilesControls = ({\n  profiles,\n  update,\n  setProfiles,\n  dispatch,\n  rawProfiles,\n  hasSearched\n}) => {\n  const handleSort = e => {\n    const sortedProfiles = profiles.sort((a, b) => {\n      return a[e.target.value] > b[e.target.value] ? 1 : -1;\n    });\n    const updatedProfiles = update(profiles, {\n      $set: sortedProfiles.slice(0)\n    });\n    setProfiles(updatedProfiles);\n    dispatch({\n      type: 'SET_ITEM',\n      name: 'profiles',\n      payload: updatedProfiles\n    });\n  };\n\n  const handleSearch = e => {\n    dispatch({\n      type: 'SET_ITEM',\n      name: 'hasSearched',\n      payload: true\n    });\n\n    if (!e.target.value) {\n      const updatedProfiles = update(profiles, {\n        $set: rawProfiles\n      });\n      setProfiles(updatedProfiles);\n      dispatch({\n        type: 'SET_ITEM',\n        name: 'profiles',\n        payload: updatedProfiles\n      });\n      dispatch({\n        type: 'SET_ITEM',\n        name: 'hasSearched',\n        payload: false\n      });\n      return;\n    }\n\n    const filteredArray = rawProfiles.filter(itm => {\n      return itm.name.toLowerCase().indexOf(e.target.value.toLowerCase()) > -1;\n    });\n    const updatedProfiles = update(profiles, {\n      $set: filteredArray\n    });\n    setProfiles(updatedProfiles);\n    dispatch({\n      type: 'SET_ITEM',\n      name: 'profiles',\n      payload: updatedProfiles\n    });\n  };\n\n  return __jsx(\"div\", {\n    className: profiles.length > 1 || hasSearched ? 'profiles-controls' : ''\n  }, profiles.length > 1 || hasSearched ? __jsx(ProfilesSearch, {\n    handleSearch: handleSearch\n  }) : '', profiles.length > 1 ? __jsx(ProfileSort, {\n    handleSort: handleSort\n  }) : '');\n};\n\nconst mapStateToProps = state => ({\n  profiles: state.profiles,\n  hasSearched: state.hasSearched,\n  rawProfiles: state.rawProfiles\n});\n\nexport default connect(mapStateToProps)(ProfilesControls);","map":null,"metadata":{},"sourceType":"module"}